<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="background-color: #f0f8ff">╭──────────────────────────────────────────────────── Prompt ─────────────────────────────────────────────────────╮</span>
<span style="background-color: #f0f8ff">│                                                                                                                 │</span>
<span style="background-color: #f0f8ff">│ Given the following doctor's notes about a patient, please extract a dictionary that contains the patient's     │</span>
<span style="background-color: #f0f8ff">│ information.                                                                                                    │</span>
<span style="background-color: #f0f8ff">│                                                                                                                 │</span>
<span style="background-color: #f0f8ff">│ 49 y/o Male with chronic macular rash to face &amp; hair, worse in beard, eyebrows &amp; nares.                         │</span>
<span style="background-color: #f0f8ff">│ Itchy, flaky, slightly scaly. Moderate response to OTC steroid cream                                            │</span>
<span style="background-color: #f0f8ff">│                                                                                                                 │</span>
<span style="background-color: #f0f8ff">│                                                                                                                 │</span>
<span style="background-color: #f0f8ff">│ Given below is XML that describes the information to extract from this document and the tags to extract it      │</span>
<span style="background-color: #f0f8ff">│ into.                                                                                                           │</span>
<span style="background-color: #f0f8ff">│                                                                                                                 │</span>
<span style="background-color: #f0f8ff">│ &lt;output&gt;                                                                                                        │</span>
<span style="background-color: #f0f8ff">│     &lt;string name="gender" description="Patient's gender"/&gt;                                                      │</span>
<span style="background-color: #f0f8ff">│     &lt;integer name="age" format="valid-range: min=0 max=100"/&gt;                                                   │</span>
<span style="background-color: #f0f8ff">│     &lt;list name="symptoms" description="Symptoms that the patient is currently experiencing. Each symptom should │</span>
<span style="background-color: #f0f8ff">│ be classified into a separate item in the list."&gt;                                                               │</span>
<span style="background-color: #f0f8ff">│         &lt;object&gt;                                                                                                │</span>
<span style="background-color: #f0f8ff">│             &lt;string name="symptom" description="Symptom that a patient is experiencing"/&gt;                       │</span>
<span style="background-color: #f0f8ff">│             &lt;string name="affected_area" format="valid-choices: choices=['head', 'neck', 'chest']"              │</span>
<span style="background-color: #f0f8ff">│ description="What part of the body the symptom is affecting"/&gt;                                                  │</span>
<span style="background-color: #f0f8ff">│         &lt;/object&gt;                                                                                               │</span>
<span style="background-color: #f0f8ff">│     &lt;/list&gt;                                                                                                     │</span>
<span style="background-color: #f0f8ff">│     &lt;list name="current_meds" description="Medications the patient is currently taking and their response"&gt;     │</span>
<span style="background-color: #f0f8ff">│         &lt;object&gt;                                                                                                │</span>
<span style="background-color: #f0f8ff">│             &lt;string name="medication" description="Name of the medication the patient is taking"/&gt;              │</span>
<span style="background-color: #f0f8ff">│             &lt;string name="response" description="How the patient is responding to the medication"/&gt;             │</span>
<span style="background-color: #f0f8ff">│         &lt;/object&gt;                                                                                               │</span>
<span style="background-color: #f0f8ff">│     &lt;/list&gt;                                                                                                     │</span>
<span style="background-color: #f0f8ff">│ &lt;/output&gt;                                                                                                       │</span>
<span style="background-color: #f0f8ff">│                                                                                                                 │</span>
<span style="background-color: #f0f8ff">│                                                                                                                 │</span>
<span style="background-color: #f0f8ff">│ ONLY return a valid JSON object (no other text is necessary), where the key of the field in JSON is the `name`  │</span>
<span style="background-color: #f0f8ff">│ attribute of the corresponding XML, and the value is of the type specified by the corresponding XML's tag. The  │</span>
<span style="background-color: #f0f8ff">│ JSON MUST conform to the XML format, including any types and format requests e.g. requests for lists, objects   │</span>
<span style="background-color: #f0f8ff">│ and specific types. Be correct and concise.                                                                     │</span>
<span style="background-color: #f0f8ff">│                                                                                                                 │</span>
<span style="background-color: #f0f8ff">│ Here are examples of simple (XML, JSON) pairs that show the expected behavior:                                  │</span>
<span style="background-color: #f0f8ff">│ - `&lt;string name='foo' format='two-words lower-case' /&gt;` =&gt; `{'foo': 'example one'}`                             │</span>
<span style="background-color: #f0f8ff">│ - `&lt;list name='bar'&gt;&lt;string format='upper-case' /&gt;&lt;/list&gt;` =&gt; `{"bar": ['STRING ONE', 'STRING TWO', etc.]}`     │</span>
<span style="background-color: #f0f8ff">│ - `&lt;object name='baz'&gt;&lt;string name="foo" format="capitalize two-words" /&gt;&lt;integer name="index"                  │</span>
<span style="background-color: #f0f8ff">│ format="1-indexed" /&gt;&lt;/object&gt;` =&gt; `{'baz': {'foo': 'Some String', 'index': 1}}`                                │</span>
<span style="background-color: #f0f8ff">│                                                                                                                 │</span>
<span style="background-color: #f0f8ff">│                                                                                                                 │</span>
<span style="background-color: #f0f8ff">│                                                                                                                 │</span>
<span style="background-color: #f0f8ff">│ Json Output:                                                                                                    │</span>
<span style="background-color: #f0f8ff">│                                                                                                                 │</span>
<span style="background-color: #f0f8ff">│                                                                                                                 │</span>
<span style="background-color: #f0f8ff">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span>
<span style="background-color: #e7dfeb">╭──────────────────────────────────────────────── Message History ────────────────────────────────────────────────╮</span>
<span style="background-color: #e7dfeb">│ ┏━━━━━━┳━━━━━━━━━┓                                                                                              │</span>
<span style="background-color: #e7dfeb">│ ┃</span><span style="background-color: #e7dfeb; font-weight: bold"> Role </span><span style="background-color: #e7dfeb">┃</span><span style="background-color: #e7dfeb; font-weight: bold"> Content </span><span style="background-color: #e7dfeb">┃                                                                                              │</span>
<span style="background-color: #e7dfeb">│ ┡━━━━━━╇━━━━━━━━━┩                                                                                              │</span>
<span style="background-color: #e7dfeb">│ └──────┴─────────┘                                                                                              │</span>
<span style="background-color: #e7dfeb">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span>
<span style="background-color: #f5f5dc">╭──────────────────────────────────────────────── Raw LLM Output ─────────────────────────────────────────────────╮</span>
<span style="background-color: #f5f5dc">│ {                                                                                                               │</span>
<span style="background-color: #f5f5dc">│     "gender": "Male",                                                                                           │</span>
<span style="background-color: #f5f5dc">│     "age": 49,                                                                                                  │</span>
<span style="background-color: #f5f5dc">│     "symptoms": [                                                                                               │</span>
<span style="background-color: #f5f5dc">│         {                                                                                                       │</span>
<span style="background-color: #f5f5dc">│             "symptom": "macular rash",                                                                          │</span>
<span style="background-color: #f5f5dc">│             "affected_area": "face &amp; hair"                                                                      │</span>
<span style="background-color: #f5f5dc">│         },                                                                                                      │</span>
<span style="background-color: #f5f5dc">│         {                                                                                                       │</span>
<span style="background-color: #f5f5dc">│             "symptom": "itchy",                                                                                 │</span>
<span style="background-color: #f5f5dc">│             "affected_area": "beard, eyebrows &amp; nares"                                                          │</span>
<span style="background-color: #f5f5dc">│         },                                                                                                      │</span>
<span style="background-color: #f5f5dc">│         {                                                                                                       │</span>
<span style="background-color: #f5f5dc">│             "symptom": "flaky",                                                                                 │</span>
<span style="background-color: #f5f5dc">│             "affected_area": "beard, eyebrows &amp; nares"                                                          │</span>
<span style="background-color: #f5f5dc">│         },                                                                                                      │</span>
<span style="background-color: #f5f5dc">│         {                                                                                                       │</span>
<span style="background-color: #f5f5dc">│             "symptom": "slightly scaly",                                                                        │</span>
<span style="background-color: #f5f5dc">│             "affected_area": "beard, eyebrows &amp; nares"                                                          │</span>
<span style="background-color: #f5f5dc">│         }                                                                                                       │</span>
<span style="background-color: #f5f5dc">│     ],                                                                                                          │</span>
<span style="background-color: #f5f5dc">│     "current_meds": [                                                                                           │</span>
<span style="background-color: #f5f5dc">│         {                                                                                                       │</span>
<span style="background-color: #f5f5dc">│             "medication": "OTC steroid cream",                                                                  │</span>
<span style="background-color: #f5f5dc">│             "response": "Moderate response"                                                                     │</span>
<span style="background-color: #f5f5dc">│         }                                                                                                       │</span>
<span style="background-color: #f5f5dc">│     ]                                                                                                           │</span>
<span style="background-color: #f5f5dc">│ }                                                                                                               │</span>
<span style="background-color: #f5f5dc">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span>
<span style="background-color: #f0fff0">╭─────────────────────────────────────────────── Validated Output ────────────────────────────────────────────────╮</span>
<span style="background-color: #f0fff0">│ {                                                                                                               │</span>
<span style="background-color: #f0fff0">│     'gender': 'Male',                                                                                           │</span>
<span style="background-color: #f0fff0">│     'age': 49,                                                                                                  │</span>
<span style="background-color: #f0fff0">│     'symptoms': [                                                                                               │</span>
<span style="background-color: #f0fff0">│         {                                                                                                       │</span>
<span style="background-color: #f0fff0">│             'symptom': 'macular rash',                                                                          │</span>
<span style="background-color: #f0fff0">│             'affected_area': FieldReAsk(                                                                        │</span>
<span style="background-color: #f0fff0">│                 incorrect_value='face &amp; hair',                                                                  │</span>
<span style="background-color: #f0fff0">│                 fail_results=[                                                                                  │</span>
<span style="background-color: #f0fff0">│                     FailResult(                                                                                 │</span>
<span style="background-color: #f0fff0">│                         outcome='fail',                                                                         │</span>
<span style="background-color: #f0fff0">│                         metadata=None,                                                                          │</span>
<span style="background-color: #f0fff0">│                         error_message="Value face &amp; hair is not in choices ['head', 'neck', 'chest'].",         │</span>
<span style="background-color: #f0fff0">│                         fix_value=None                                                                          │</span>
<span style="background-color: #f0fff0">│                     )                                                                                           │</span>
<span style="background-color: #f0fff0">│                 ],                                                                                              │</span>
<span style="background-color: #f0fff0">│                 path=['symptoms', 0, 'affected_area']                                                           │</span>
<span style="background-color: #f0fff0">│             )                                                                                                   │</span>
<span style="background-color: #f0fff0">│         },                                                                                                      │</span>
<span style="background-color: #f0fff0">│         {                                                                                                       │</span>
<span style="background-color: #f0fff0">│             'symptom': 'itchy',                                                                                 │</span>
<span style="background-color: #f0fff0">│             'affected_area': FieldReAsk(                                                                        │</span>
<span style="background-color: #f0fff0">│                 incorrect_value='beard, eyebrows &amp; nares',                                                      │</span>
<span style="background-color: #f0fff0">│                 fail_results=[                                                                                  │</span>
<span style="background-color: #f0fff0">│                     FailResult(                                                                                 │</span>
<span style="background-color: #f0fff0">│                         outcome='fail',                                                                         │</span>
<span style="background-color: #f0fff0">│                         metadata=None,                                                                          │</span>
<span style="background-color: #f0fff0">│                         error_message="Value beard, eyebrows &amp; nares is not in choices ['head', 'neck',         │</span>
<span style="background-color: #f0fff0">│ 'chest'].",                                                                                                     │</span>
<span style="background-color: #f0fff0">│                         fix_value=None                                                                          │</span>
<span style="background-color: #f0fff0">│                     )                                                                                           │</span>
<span style="background-color: #f0fff0">│                 ],                                                                                              │</span>
<span style="background-color: #f0fff0">│                 path=['symptoms', 1, 'affected_area']                                                           │</span>
<span style="background-color: #f0fff0">│             )                                                                                                   │</span>
<span style="background-color: #f0fff0">│         },                                                                                                      │</span>
<span style="background-color: #f0fff0">│         {                                                                                                       │</span>
<span style="background-color: #f0fff0">│             'symptom': 'flaky',                                                                                 │</span>
<span style="background-color: #f0fff0">│             'affected_area': FieldReAsk(                                                                        │</span>
<span style="background-color: #f0fff0">│                 incorrect_value='beard, eyebrows &amp; nares',                                                      │</span>
<span style="background-color: #f0fff0">│                 fail_results=[                                                                                  │</span>
<span style="background-color: #f0fff0">│                     FailResult(                                                                                 │</span>
<span style="background-color: #f0fff0">│                         outcome='fail',                                                                         │</span>
<span style="background-color: #f0fff0">│                         metadata=None,                                                                          │</span>
<span style="background-color: #f0fff0">│                         error_message="Value beard, eyebrows &amp; nares is not in choices ['head', 'neck',         │</span>
<span style="background-color: #f0fff0">│ 'chest'].",                                                                                                     │</span>
<span style="background-color: #f0fff0">│                         fix_value=None                                                                          │</span>
<span style="background-color: #f0fff0">│                     )                                                                                           │</span>
<span style="background-color: #f0fff0">│                 ],                                                                                              │</span>
<span style="background-color: #f0fff0">│                 path=['symptoms', 2, 'affected_area']                                                           │</span>
<span style="background-color: #f0fff0">│             )                                                                                                   │</span>
<span style="background-color: #f0fff0">│         },                                                                                                      │</span>
<span style="background-color: #f0fff0">│         {                                                                                                       │</span>
<span style="background-color: #f0fff0">│             'symptom': 'slightly scaly',                                                                        │</span>
<span style="background-color: #f0fff0">│             'affected_area': FieldReAsk(                                                                        │</span>
<span style="background-color: #f0fff0">│                 incorrect_value='beard, eyebrows &amp; nares',                                                      │</span>
<span style="background-color: #f0fff0">│                 fail_results=[                                                                                  │</span>
<span style="background-color: #f0fff0">│                     FailResult(                                                                                 │</span>
<span style="background-color: #f0fff0">│                         outcome='fail',                                                                         │</span>
<span style="background-color: #f0fff0">│                         metadata=None,                                                                          │</span>
<span style="background-color: #f0fff0">│                         error_message="Value beard, eyebrows &amp; nares is not in choices ['head', 'neck',         │</span>
<span style="background-color: #f0fff0">│ 'chest'].",                                                                                                     │</span>
<span style="background-color: #f0fff0">│                         fix_value=None                                                                          │</span>
<span style="background-color: #f0fff0">│                     )                                                                                           │</span>
<span style="background-color: #f0fff0">│                 ],                                                                                              │</span>
<span style="background-color: #f0fff0">│                 path=['symptoms', 3, 'affected_area']                                                           │</span>
<span style="background-color: #f0fff0">│             )                                                                                                   │</span>
<span style="background-color: #f0fff0">│         }                                                                                                       │</span>
<span style="background-color: #f0fff0">│     ],                                                                                                          │</span>
<span style="background-color: #f0fff0">│     'current_meds': [                                                                                           │</span>
<span style="background-color: #f0fff0">│         {'medication': 'OTC steroid cream', 'response': 'Moderate response'}                                    │</span>
<span style="background-color: #f0fff0">│     ]                                                                                                           │</span>
<span style="background-color: #f0fff0">│ }                                                                                                               │</span>
<span style="background-color: #f0fff0">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span>
</pre>