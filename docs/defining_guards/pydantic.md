# Pydantic
Pydantic is the most widely used data validation library for Python <a href="https://docs.pydantic.dev/latest/">[1]</a>. Guardrails extends pydantic to provide structured validations over LLM outputs and describe output structure for LLM responses.

Guardrails has first class Pydantic support, and we encourage users to use Pydantic as the primary way to specify guards.

## Structured outputs
Guardrails uses pydantic to describe and validate structured output. For unstructured output, see <a href='/defining_guards/strings'>Strings</a>.

Let's say you want an LLM to generate fake pets. We can model a Pet as class that inherits from <a href="https://docs.pydantic.dev/latest/api/base_model/">BaseModel</a>. Each field can take descriptions and validators.


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! Instead, edit the notebook w/the location & name as this file. -->


```python
from pydantic import BaseModel, Field

class Pet(BaseModel):
    pet_type: str = Field(description="Species of pet")
    name: str = Field(description="a unique pet name")
```

This class can be passed to a guard along with a prompt using the `from_pydantic` initializer, which takes an `output_class` parameter. When invoked, the LLM returns output formatted to the pydantic structure. In the prompt, we need to make sure we keep an output formatter suffix - `${gr.complete_json_suffix_v2}`. This tells our LLM to respond with json.



```python
from guardrails import Guard
import openai
prompt = """
    What kind of pet should I get and what should I name it?

    ${gr.complete_json_suffix_v2}
"""
guard = Guard.from_pydantic(output_class=Pet, prompt=prompt)

raw_llm_output, validated_output = guard(
    llm_api=openai.Completion.create,
    engine="text-davinci-003"
)

print(validated_output)
```
    
<CodeOutputBlock dangerouslySetInnerHTML={{ __html: "Async event loop found, but guard was invoked synchronously.For validator parallelization, please call `validate_async` instead.<br /><br /><br /><br />```html<br /><pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\"><span style=\"font-weight: bold\">{</span><span style=\"color: #008000; text-decoration-color: #008000\">'pet_type'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'Dog'</span>, <span style=\"color: #008000; text-decoration-color: #008000\">'name'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'Max'</span><span style=\"font-weight: bold\">}</span><br /></pre>"}} />

### Structured output with validation
Now that we have our LLM responding to us in JSON with the structured information we're asking for, we can add validations and corrective actions. Below, we've added a validator to the 'name' field that ensures the name cannot be null. We've also added an on_fail action of "reask" if the name is null. What this does is reasks the LLM if the validation fails. Check the <a href="api_reference/validators">Validators API Spec</a> for a list of standard validators, or you can write your own.


```python
from guardrails.validators import ValidLength, TwoWords
from rich import print

class Pet(BaseModel):
    pet_type: str = Field(description="Species of pet")
    name: str = Field(description="a unique pet name", validators=[ValidLength(min=8, max=32, on_fail='reask')])

guard = Guard.from_pydantic(output_class=Pet, prompt=prompt)

raw_llm_output, validated_output = guard(
    llm_api=openai.Completion.create,
    engine="text-davinci-003",
    max_tokens=1024,
    temperature=1
)

print(guard.state.most_recent_call.tree)
```
    
<CodeOutputBlock dangerouslySetInnerHTML={{ __html: "Async event loop found, but guard was invoked synchronously.For validator parallelization, please call `validate_async` instead.<br />    Async event loop found, but guard was invoked synchronously.For validator parallelization, please call `validate_async` instead.<br /><br /><br /><br />```html<br /><pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">Logs<br />├── ╭────────────────────────────────────────────────── Step 0 ───────────────────────────────────────────────────╮<br />│   │ <span style=\"background-color: #f0f8ff\">╭──────────────────────────────────────────────── Prompt ─────────────────────────────────────────────────╮</span> │<br />│   │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />│   │ <span style=\"background-color: #f0f8ff\">│     What kind of pet should I get and what should I name it? Give me some details about it's breed      │</span> │<br />│   │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />│   │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />│   │ <span style=\"background-color: #f0f8ff\">│ Given below is XML that describes the information to extract from this document and the tags to extract │</span> │<br />│   │ <span style=\"background-color: #f0f8ff\">│ it into.                                                                                                │</span> │<br />│   │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />│   │ <span style=\"background-color: #f0f8ff\">│ &lt;output&gt;                                                                                                │</span> │<br />│   │ <span style=\"background-color: #f0f8ff\">│     &lt;string name=\"pet_type\" description=\"Species of pet\"/&gt;                                              │</span> │<br />│   │ <span style=\"background-color: #f0f8ff\">│     &lt;string name=\"name\" format=\"length: min=8 max=32\" description=\"a unique pet name\"/&gt;                 │</span> │<br />│   │ <span style=\"background-color: #f0f8ff\">│ &lt;/output&gt;                                                                                               │</span> │<br />│   │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />│   │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />│   │ <span style=\"background-color: #f0f8ff\">│ ONLY return a valid JSON object (no other text is necessary), where the key of the field in JSON is the │</span> │<br />│   │ <span style=\"background-color: #f0f8ff\">│ `name` attribute of the corresponding XML, and the value is of the type specified by the corresponding  │</span> │<br />│   │ <span style=\"background-color: #f0f8ff\">│ XML's tag. The JSON MUST conform to the XML format, including any types and format requests e.g.        │</span> │<br />│   │ <span style=\"background-color: #f0f8ff\">│ requests for lists, objects and specific types. Be correct and concise.                                 │</span> │<br />│   │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />│   │ <span style=\"background-color: #f0f8ff\">│ Here are examples of simple (XML, JSON) pairs that show the expected behavior:                          │</span> │<br />│   │ <span style=\"background-color: #f0f8ff\">│ - `&lt;string name='foo' format='two-words lower-case' /&gt;` =&gt; `{'foo': 'example one'}`                     │</span> │<br />│   │ <span style=\"background-color: #f0f8ff\">│ - `&lt;list name='bar'&gt;&lt;string format='upper-case' /&gt;&lt;/list&gt;` =&gt; `{\"bar\": ['STRING ONE', 'STRING TWO',     │</span> │<br />│   │ <span style=\"background-color: #f0f8ff\">│ etc.]}`                                                                                                 │</span> │<br />│   │ <span style=\"background-color: #f0f8ff\">│ - `&lt;object name='baz'&gt;&lt;string name=\"foo\" format=\"capitalize two-words\" /&gt;&lt;integer name=\"index\"          │</span> │<br />│   │ <span style=\"background-color: #f0f8ff\">│ format=\"1-indexed\" /&gt;&lt;/object&gt;` =&gt; `{'baz': {'foo': 'Some String', 'index': 1}}`                        │</span> │<br />│   │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />│   │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />│   │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />│   │ <span style=\"background-color: #f0f8ff\">│ Json Output:                                                                                            │</span> │<br />│   │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />│   │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />│   │ <span style=\"background-color: #f0f8ff\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">╭──────────────────────────────────────────── Message History ────────────────────────────────────────────╮</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ ┏━━━━━━┳━━━━━━━━━┓                                                                                      │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ ┃</span><span style=\"background-color: #e7dfeb; font-weight: bold\"> Role </span><span style=\"background-color: #e7dfeb\">┃</span><span style=\"background-color: #e7dfeb; font-weight: bold\"> Content </span><span style=\"background-color: #e7dfeb\">┃                                                                                      │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ ┡━━━━━━╇━━━━━━━━━┩                                                                                      │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ └──────┴─────────┘                                                                                      │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">╭──────────────────────────────────────────── Raw LLM Output ─────────────────────────────────────────────╮</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│ {\"pet_type\": \"Dog\", \"name\": \"Fido\"}                                                                     │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />│   │ <span style=\"background-color: #f0fff0\">╭─────────────────────────────────────────── Validated Output ────────────────────────────────────────────╮</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│ {                                                                                                       │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│     'pet_type': 'Dog',                                                                                  │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│     'name': FieldReAsk(                                                                                 │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│         incorrect_value='Fido',                                                                         │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│         fail_results=[                                                                                  │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│             FailResult(                                                                                 │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 outcome='fail',                                                                         │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 metadata=None,                                                                          │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 error_message='Value has length less than 8. Please return a longer output, that is     │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│ shorter than 32 characters.',                                                                           │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 fix_value='Fidooooo'                                                                    │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│             )                                                                                           │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│         ],                                                                                              │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│         path=['name']                                                                                   │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│     )                                                                                                   │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│ }                                                                                                       │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />│   ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯<br />└── ╭────────────────────────────────────────────────── Step 1 ───────────────────────────────────────────────────╮<br />    │ <span style=\"background-color: #f0f8ff\">╭──────────────────────────────────────────────── Prompt ─────────────────────────────────────────────────╮</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│ I was given the following JSON response, which had problems due to incorrect values.                    │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│ {                                                                                                       │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│   \"pet_type\": \"Dog\",                                                                                    │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│   \"name\": {                                                                                             │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│     \"incorrect_value\": \"Fido\",                                                                          │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│     \"error_messages\": [                                                                                 │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│       \"Value has length less than 8. Please return a longer output, that is shorter than 32             │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│ characters.\"                                                                                            │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│     ]                                                                                                   │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│   }                                                                                                     │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│ }                                                                                                       │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│ Help me correct the incorrect values based on the given error messages.                                 │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│ Given below is XML that describes the information to extract from this document and the tags to extract │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│ it into.                                                                                                │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│ &lt;output&gt;                                                                                                │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│     &lt;string name=\"pet_type\" description=\"Species of pet\"/&gt;                                              │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│     &lt;string name=\"name\" format=\"length: min=8 max=32\" description=\"a unique pet name\"/&gt;                 │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│ &lt;/output&gt;                                                                                               │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│ ONLY return a valid JSON object (no other text is necessary), where the key of the field in JSON is the │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│ `name` attribute of the corresponding XML, and the value is of the type specified by the corresponding  │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│ XML's tag. The JSON MUST conform to the XML format, including any types and format requests e.g.        │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│ requests for lists, objects and specific types. Be correct and concise. If you are unsure anywhere,     │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│ enter `null`.                                                                                           │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│ Json Output:                                                                                            │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />    │ <span style=\"background-color: #fff0f2\">╭───────────────────────────────────────────── Instructions ──────────────────────────────────────────────╮</span> │<br />    │ <span style=\"background-color: #fff0f2\">│                                                                                                         │</span> │<br />    │ <span style=\"background-color: #fff0f2\">│ You are a helpful assistant only capable of communicating with valid JSON, and no other text.           │</span> │<br />    │ <span style=\"background-color: #fff0f2\">│                                                                                                         │</span> │<br />    │ <span style=\"background-color: #fff0f2\">│ ONLY return a valid JSON object (no other text is necessary), where the key of the field in JSON is the │</span> │<br />    │ <span style=\"background-color: #fff0f2\">│ `name` attribute of the corresponding XML, and the value is of the type specified by the corresponding  │</span> │<br />    │ <span style=\"background-color: #fff0f2\">│ XML's tag. The JSON MUST conform to the XML format, including any types and format requests e.g.        │</span> │<br />    │ <span style=\"background-color: #fff0f2\">│ requests for lists, objects and specific types. Be correct and concise. If you are unsure anywhere,     │</span> │<br />    │ <span style=\"background-color: #fff0f2\">│ enter `null`.                                                                                           │</span> │<br />    │ <span style=\"background-color: #fff0f2\">│                                                                                                         │</span> │<br />    │ <span style=\"background-color: #fff0f2\">│ Here are examples of simple (XML, JSON) pairs that show the expected behavior:                          │</span> │<br />    │ <span style=\"background-color: #fff0f2\">│ - `&lt;string name='foo' format='two-words lower-case' /&gt;` =&gt; `{'foo': 'example one'}`                     │</span> │<br />    │ <span style=\"background-color: #fff0f2\">│ - `&lt;list name='bar'&gt;&lt;string format='upper-case' /&gt;&lt;/list&gt;` =&gt; `{\"bar\": ['STRING ONE', 'STRING TWO',     │</span> │<br />    │ <span style=\"background-color: #fff0f2\">│ etc.]}`                                                                                                 │</span> │<br />    │ <span style=\"background-color: #fff0f2\">│ - `&lt;object name='baz'&gt;&lt;string name=\"foo\" format=\"capitalize two-words\" /&gt;&lt;integer name=\"index\"          │</span> │<br />    │ <span style=\"background-color: #fff0f2\">│ format=\"1-indexed\" /&gt;&lt;/object&gt;` =&gt; `{'baz': {'foo': 'Some String', 'index': 1}}`                        │</span> │<br />    │ <span style=\"background-color: #fff0f2\">│                                                                                                         │</span> │<br />    │ <span style=\"background-color: #fff0f2\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />    │ <span style=\"background-color: #e7dfeb\">╭──────────────────────────────────────────── Message History ────────────────────────────────────────────╮</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ No message history.                                                                                     │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />    │ <span style=\"background-color: #f5f5dc\">╭──────────────────────────────────────────── Raw LLM Output ─────────────────────────────────────────────╮</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ {\"pet_type\": \"Dog\", \"name\": \"FidoFido\"}                                                                 │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />    │ <span style=\"background-color: #f0fff0\">╭─────────────────────────────────────────── Validated Output ────────────────────────────────────────────╮</span> │<br />    │ <span style=\"background-color: #f0fff0\">│ {'pet_type': 'Dog', 'name': 'FidoFido'}                                                                 │</span> │<br />    │ <span style=\"background-color: #f0fff0\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />    ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯<br /></pre>"}} />

### Nested structured Output

Finally, we can structure and validate nested pydantic models. For example, if we wanted to ask for additional metadata, we could do something like this


```python
class BreedInformation(BaseModel):
    breed_name: str = Field(description="Specific pet breed")
    common_colors: str = Field(description="common colors for this pet breed")
    life_expectancy: str = Field(description="how long animals of this breed tend to live")

class Pet(BaseModel):
    pet_type: str = Field(description="A type of pet")
    name: str = Field(description="a unique pet name", validators=[ValidLength(min=8, max=32, on_fail='reask')])
    breed: BreedInformation = Field(description="information about the breed of pet")


prompt = """
    What kind of pet should I get and what should I name it? Give me some details about it's breed

    ${gr.complete_json_suffix_v2}
"""

guard = Guard.from_pydantic(output_class=Pet, prompt=prompt)
raw_llm_output, validated_output = guard(
    llm_api=openai.Completion.create,
    engine="text-davinci-003",
    max_tokens=1024,
    temperature=1
)

print(guard.state.most_recent_call.tree)
```
    
<CodeOutputBlock dangerouslySetInnerHTML={{ __html: "Async event loop found, but guard was invoked synchronously.For validator parallelization, please call `validate_async` instead.<br /><br /><br /><br />```html<br /><pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">Logs<br />└── ╭────────────────────────────────────────────────── Step 0 ───────────────────────────────────────────────────╮<br />    │ <span style=\"background-color: #f0f8ff\">╭──────────────────────────────────────────────── Prompt ─────────────────────────────────────────────────╮</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│     What kind of pet should I get and what should I name it? Give me some details about it's breed      │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│ Given below is XML that describes the information to extract from this document and the tags to extract │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│ it into.                                                                                                │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│ &lt;output&gt;                                                                                                │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│     &lt;string name=\"pet_type\" description=\"A type of pet\"/&gt;                                               │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│     &lt;string name=\"name\" format=\"length: min=8 max=32\" description=\"a unique pet name\"/&gt;                 │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│     &lt;object name=\"breed\" description=\"information about the breed of pet\"&gt;                              │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│         &lt;string name=\"breed_name\" description=\"Specific pet breed\"/&gt;                                    │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│         &lt;string name=\"common_colors\" description=\"common colors for this pet breed\"/&gt;                   │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│         &lt;string name=\"life_expectancy\" description=\"how long animals of this breed tend to live\"/&gt;      │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│     &lt;/object&gt;                                                                                           │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│ &lt;/output&gt;                                                                                               │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│ ONLY return a valid JSON object (no other text is necessary), where the key of the field in JSON is the │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│ `name` attribute of the corresponding XML, and the value is of the type specified by the corresponding  │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│ XML's tag. The JSON MUST conform to the XML format, including any types and format requests e.g.        │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│ requests for lists, objects and specific types. Be correct and concise.                                 │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│ Here are examples of simple (XML, JSON) pairs that show the expected behavior:                          │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│ - `&lt;string name='foo' format='two-words lower-case' /&gt;` =&gt; `{'foo': 'example one'}`                     │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│ - `&lt;list name='bar'&gt;&lt;string format='upper-case' /&gt;&lt;/list&gt;` =&gt; `{\"bar\": ['STRING ONE', 'STRING TWO',     │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│ etc.]}`                                                                                                 │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│ - `&lt;object name='baz'&gt;&lt;string name=\"foo\" format=\"capitalize two-words\" /&gt;&lt;integer name=\"index\"          │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│ format=\"1-indexed\" /&gt;&lt;/object&gt;` =&gt; `{'baz': {'foo': 'Some String', 'index': 1}}`                        │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│ Json Output:                                                                                            │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">│                                                                                                         │</span> │<br />    │ <span style=\"background-color: #f0f8ff\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />    │ <span style=\"background-color: #e7dfeb\">╭──────────────────────────────────────────── Message History ────────────────────────────────────────────╮</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ ┏━━━━━━┳━━━━━━━━━┓                                                                                      │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ ┃</span><span style=\"background-color: #e7dfeb; font-weight: bold\"> Role </span><span style=\"background-color: #e7dfeb\">┃</span><span style=\"background-color: #e7dfeb; font-weight: bold\"> Content </span><span style=\"background-color: #e7dfeb\">┃                                                                                      │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ ┡━━━━━━╇━━━━━━━━━┩                                                                                      │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ └──────┴─────────┘                                                                                      │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />    │ <span style=\"background-color: #f5f5dc\">╭──────────────────────────────────────────── Raw LLM Output ─────────────────────────────────────────────╮</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ {                                                                                                       │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│     \"pet_type\": \"dog\",                                                                                  │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│     \"name\": \"FuzzyBear\",                                                                                │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│     \"breed\": {                                                                                          │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│         \"breed_name\": \"Labrador Retriever\",                                                             │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│         \"common_colors\": [\"black\", \"yellow\", \"chocolate\"],                                              │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│         \"life_expectancy\": \"13 to 16 years\"                                                             │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│     }                                                                                                   │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ }                                                                                                       │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />    │ <span style=\"background-color: #f0fff0\">╭─────────────────────────────────────────── Validated Output ────────────────────────────────────────────╮</span> │<br />    │ <span style=\"background-color: #f0fff0\">│ {                                                                                                       │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│     'pet_type': 'dog',                                                                                  │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│     'name': 'FuzzyBear',                                                                                │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│     'breed': {                                                                                          │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         'breed_name': 'Labrador Retriever',                                                             │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         'common_colors': ['black', 'yellow', 'chocolate'],                                              │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         'life_expectancy': '13 to 16 years'                                                             │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│     }                                                                                                   │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│ }                                                                                                       │</span> │<br />    │ <span style=\"background-color: #f0fff0\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />    ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯<br /></pre>"}} />
